### 中科国创高可信 -- C++实习

```
2021-3-5 	9:20 ~ 11:20
```

1. 不用循环逆序输出单链表（递归解决）

2. 判断链表是否有环

3. 字符串的全排列组合（没有理解题目意思，条件考虑太多）

4. double数组的二分查找，用精确度去衡量double数据是否相等

5. 设计一个哈希表结构

6. 代码风格问题：

   ```cpp
   if(...) return;
   if(...) {
       return;
   }
   
   if(!head)
   if(nullptr == head)
       
   using namespace std;
   using std::xxx;
   
   // 宏定义和const变量
   
   // 软件测试相关，一点不会。。。
   ```

7. 代码风格很严谨，是经常写代码么？（嗯，是恰好看过google C++ 风格指南）

8. 你经常刷题么？力扣是吧，你觉得刷题的过程中有什么收获？力扣平台有什么不足的地方？（思虑良久，需要开会员才能看某些题。。。)

9. 个人规划，研一才半学期，为什么找实习？

10. C++用了多久，你对面向对象三大特性的理解？封装（包装属性和方法，隐藏类实现细节），继承，多态各自解决了什么问题？

11. 指针和引用的区别？

12. C++的虚机制，如何用C实现C++的多态？

13. C++11/14的了解？最近看什么书？

14. new和malloc的区别（new调用构造函数，delete调用析构函数）

15. 讲一下左值引用，右值引用，还有完美转发怎么实现的？为什么要完美转发？（相互聊了将近20分钟。。）

16. 你觉得作为一个开发人员，最重要的东西有哪些？

17. 有什么个人兴趣爱好？

18. C++类分配内存的顺序（除了静态和全局变量，其它的按声明的顺序来分配），并由此带来的问题，初始化时，先声明的变量用后声明的变量去初始化导致的失败问题

19. 一些其它问题记不太清了，我的项目一个也没问，因为公司是做C和C++代码的检测工具的，所以需要对C++语言基础和新特性有比较深的了解，对于linux网络编程和系统编程都没怎么问

### [蓝湖](https://lanhuapp.com/) -- 后台研发实习

```
2021-9-27 19:30 ~ 20:30
```

**算法题：**

* 判断一组矩形是否同轴，即矩阵中心坐标是否在同一坐标线上，x同轴或y同轴都返回true

  很简单一道题，但是最后代码没写好，跟面试官沟通后不能第一遍求出各矩形坐标中心再判断；也不允许两次循环，第一次判断x轴，第二次再判断y轴；最后考虑使用标志位，但是代码写的还是有问题：

  * 求矩阵中心点时不能除以2，因为(2, 2)和(2, 3)并不同轴；

  最后修改过的代码：

  ```cpp
  /**
   * @file     isCoaxial.cpp
   * @brief
   * @author   YongDu
   * @date     2021-09-27
   */
  
  #include <iostream>
  #include <vector>
  
  struct Rectangle {
    int x1;
    int y1;
    int x2;
    int y2;
  
    Rectangle(int _x1, int _y1, int _x2, int _y2) : x1(_x1), y1(_y1), x2(_x2), y2(_y2) {}
  };
  
  bool isCoaxial(const std::vector<Rectangle *> &rectangles) {
    if (rectangles.empty()) {
      return false;
    }
  
    int preX = rectangles[0]->x1 + rectangles[0]->x2;
    int preY = rectangles[0]->y1 + rectangles[0]->y2;
  
    bool xCoaxial{true};
    bool yCoaxial{true};
  
    for (int i = 1; i < rectangles.size(); ++i) {
      int curX = rectangles[i]->x1 + rectangles[i]->x2;
      int curY = rectangles[i]->y1 + rectangles[i]->y2;
  
      if (curX != preX) {
        xCoaxial = false;
      }
      if (curY != preY) {
        yCoaxial = false;
      }
      if (!xCoaxial && !xCoaxial) {
        return false;
      }
  
      preX = curX;
      preY = curY;
    }
    return true;
  }
  
  int main() {
    std::vector<Rectangle *> rectangles;
    rectangles.emplace_back(new Rectangle(0, 0, 5, 5));
    rectangles.emplace_back(new Rectangle(-3, 4, 8, -2));
    std::cout << isCoaxial(rectangles) << std::endl;
  
    return 0;
  }
  ```

* k个长度为N的链表合并，口述方法并分析事件复杂度

  这道题以前做过，也知道代码怎么写，但是时间复杂度没认真分析过，自己分析了`kNlgN`，面试官没说啥，估计失望了都，后来查了是`Nlgk`，自己也是平时不注意这些细节，感觉不太好。

**C++相关：**

* C++多态的理解
* C++的内存模型，堆栈的区别
* 。。。？已经没有然后了

**其它：**

* 第一份实习为什么去做代码静态分析，这段实习最大的收获是什么
* 其它一些比较杂七杂八的问题

**总结：**

这次面试感觉不太好，第一，算法题还是不够熟练，平时不注意思考问题，只是记了代码模板；第二，基本的知识点都知道，也有一定的理解，但是想把你所了解的东西完整且清晰地传达给面试官也是非常重要的，这体现了沟通能力，也直接影响工作能力，而自己这方面的能力明显有所欠缺。

### 七牛云 -- 后台研发实习

两面技术面都忘记录音了，两轮技术面的面试官都比较和善，面试比较简单，不打算回忆了，自己挺想去这个公司的，听说是国内玩`go`比较牛的公司

### 大疆 -- 智能驾驶研发实习

**一面**：

```
2021-10-12 19:00 - 20:00
```

* 面试官自我介绍，香港科技大学毕业的，人很和善，我提前10分钟进的会议，他已经在等了，尴尬

* 为什么考研？为什么学计算机

* 为什么不想做静态代码检测了

* 研究生学的东西，具体哪个方向深入一些，实验室做的什么东西

* `Autosar`规则集的理解

* 具体规则是怎么实现的？你实现一条规则的流程是什么

* 对象切片是什么？有什么风险

* C++中的未定义行为

* 右值和右值引用相关

* 完美转发和移动语义的意义

* `shared_ptr`和`unique_ptr`是怎么实现的？两者的性能

  性能这个自己不太懂，面试官说从解引用的角度去考虑

* 引用计数是否线程安全，智能指针本身是线程安全的么

* 怎么实现一个线程池（线程的封装，线程间的同步和互斥，消息队列）

* `RAII`机制，有使用过么？

  一般的互斥锁可以封装为一个结构体，构造函数中加锁，析构中释放锁，访问临界资源时，创建局部封装类即可。线程池中封装了一个`lock_guard`，即`RAII`

* 线程池销毁需要注意什么？

  * 需要唤醒所有`wait`状态线程，`pthread_cond_broadcast, pthread_join`
  * 销毁互斥锁，条件变量，信号量

* 什么是僵尸进程，怎么处理僵尸进程

  不要直接说使用`wait/waitpid`，子进程退出时会发送`SIGCHILD`信号，父进程收到这个信号时去调用`waitpid`去处理

  或者直接忽略此信号，交给`init`进程去回收，效率更高

* 编程题：线段组成的链表，给一个链表头结点，一个长度，最后找到此长度在线段链表中最后一段所占的百分比

  磕磕绊绊做了10多分钟，起初不是很理解题目意思，用动态规划去实现，后来发现只需要遍历一次链表即可，醉了

* 反问，问了部门技术栈相关

**HR面**：

大疆一面就给了offer，实习薪资也蛮高的，就是在深圳太远而且做的东西偏工具类型，就婉拒了

### 百度 -- 定位算法实习

```
2021-10-13 19:00 - 20:00	
```

**一面**：

* 面试官开头就说这是一面比较简单，你不用紧张，我们简单聊聊就好，人很和善

* `static`的作用

  成员函数，普通函数，普通变量，成员变量

* C++的内存模型，各自存放什么，有什么区别？

  栈区，堆区，静态存储区，常量区，代码区

* 栈区和堆区区别，大小各自为多少

  Linux可以用`ulimit -a`，堆区和内存大小有关

* 之前实习情况，做的项目

* 介绍Linux高并发服务器项目

  * 需要完整的讲述自己做的项目框架是什么，进程模型是怎样的，线程池怎么去处理业务逻辑，连接池怎么和线程池交互

  * master进程和worker进程关系，有通信么（只用了信号用来监听子进程）

  * 和`nginx`有什么关系，只是借鉴了进程模型和`epoll`的使用
  * 有测试过自己的框架么？支持多大并发量
  * 是打印的日志么？
  * `worker`进程间是否独立，每个`worker`进程都有自己的线程池和连接池，只共享了监听端口
  * 线程间用了什么通信技术（互斥锁，条件变量，信号量）

* 进程和线程的区别

* 线程独有数据有了解么？

  * 线程局部变量
  * 将线程`id`和独有数据封装为一个结构体（其实自己线程池就是这么实现的，只不过不知道这玩意叫做线程独有变量）

* `vector`和`list`的区别，需要使用时如何选择？

* 判断链表是否有环？

* 屏幕共享写一个单例

  * 需要先和面试官沟通，自己要写什么模式的单例，单线程版还是线程安全的双检查锁机制，懒汉模式版

* 双检查锁版一定线程安全么？

  不一定，存在`memoryreorder`问题，可能没有初始化就已经赋值给了变量

* 你写的这个局部`GC`可以释放单例内存么？

* 单例更好地处理方式

  不要使用双检查锁机制，用最简单的饿汉式单例，在创建多线程之前初始化单例，则必定是线程安全的，而且没有锁的开销，效率和性能好，局限性：暂时不了解

* `linux`命令
  * 打印文档第二列数据：`awk`
  * 查看端口状态`netstat, lsof`
  * `vim`如何复制一段文字：定位到复制开始处，进入`v`模式，`y`复制，`p`粘贴
  * 查询可执行二进制文件`which`
  * `locate`，`top`

* 反问：部门技术栈，等后续面试

**二面**：

* 忘记录音了，面了差不多半个多小时，就问了一些八股文，算法题也没有做

**三面**：

* 上个面试官说下一面是HR面，结果又是一面技术面，上来一顿机器学习问懵了，最后做了一道算法题，10 * 10的格子，找出某条线段穿过的格子
* 凉凉，面试官说想做算法平台的话，先把机器学习基础原理学好

### 商汤 -- 研究院-C++实习生

```
2021-10-14 19:00 - 20:00	
```

* 介绍实习所做的项目

* 规则怎么实现的，举一个例子

* `AST`树具体怎么使用

* 做项目遇到最大的难点

* C++的三种new，各自有什么区别？

* new和operator new有什么区别？

* 为什么要使用placenew

* new分配失败会怎么样？只抛出`bad_alloc`异常么

* 静态分析能否检测资源泄露问题，怎么检测？

* 公司项目用C++什么标准

* 讲一下C++14中的新特性

* 泛型`lambda`

* 虚函数表存放在什么地方

* 未初始化的全局变量存放在什么位置

* 模板成员函数可以为虚函数么？

  太菜了，我说了居然可以，面试官一直让我从虚函数表建立的机制分析，僵持了好几分钟，最后还是不确定

* 共享屏幕实现一个`vector`，要求实现构造函数，拷贝构造，拷贝赋值，`push_back()`，用模板实现

  自己犯的错误：

  * 拷贝赋值函数没有考虑自我赋值问题；
  * 面试官一直引导让使用placenew去优化，但是自己之前没用过`placenew`，实在不会改
  * `push_back()`参数我设计时用的`const Ty&`，可以接受左值或者右值，但面试官说其它方法，我猜是引用折叠就改了，但自己感觉用引用折叠有点问题，总觉得哪不对
  * 动态扩容后忘记修改`capacity`

* 反问环节：

  * 部门技术栈
  * 建议：多读一些源码并亲自去实践

* 太菜了，明天应该能收到感谢信了。。。

### 魔门塔 --  C++研发

```
2021-10-18 19:00 ~ 19:30
```

**一面**：

* 介绍实习做的项目，有用过什么开源框架么

* 工具集什么语言写的？

* 研一就出来实习呢？已经实习这么久呢。。。

* 这段实习的代码量，大概有多少行？4000 - 5000左右吧

* 其它项目的代码量，刷了多少题了？

* 平时在什么平台下开发

* 介绍下自己做的服务器项目

* 介绍下C++11的新特性

* C++11中的智能指针介绍下，自己平时怎么使用的？

  `auto_ptr, shared_ptr, unique_ptr, weak_ptr`

* 讲下容器的迭代器失效

* `vector`怎么避免迭代器失效

  自己说使用`for-range`循环，面试说可以重新赋值，重新获取

* 讲一下拷贝构造移动构造函数

  从左值右值到左值引用，右值引用再到移动语义，完美转发，老八股文

* 算法题：旋转链表，记得时刻判断`k`的值，`k`有可能大于链表长度，分析下时间复杂度

* 讲一下Python中的深拷贝和浅拷贝

* 构建工具`cmake`相关

* 部门技术栈：偏嵌入式，需要了解一些交叉编译

**二面和HR面**：

* 二面没有录音，更多问了一些和生产工具相关的，cmake，git，还有内存分配器
* HR面商量Offer，但是加班太狠了，而且没有加班费，考虑中

### 深信服 -- C++开发

```
2021-10-18 20:00 ~ 21:00
```

* 这个面试官很实在，盯着自己的简历一条一条往下问

* 说一说自己的技术栈，自己什么方面强一点

* 写一个查找子串，跟面试官了说了KMP写不出来，最后写了暴力搜索

* 反转链表，构造测试例测试

* 讲一件你知道的排序算法

  写可能有点难度，但不好意思，鄙人熟读10大排序算法的名字，呵呵哒

* `set`底层用的什么数据结构，为什么要用红黑树，

  要和二叉树搜索树对比回答

* 哈希表怎么解决冲突，哈希表的应用场景

* 阐述下自己的服务器项目，具体实现了哪些功能

* 有测试自己的服务器么，支持多大并发量，怎么测试的

* 你用过`lldb`，怎么调试多线程

* TCP粘包讲一下，怎么解决的

* TCP和UDP的区别

* 流量控制和拥塞控制的区别和以及过程

* Linux命令

  查看进程状态，怎么查找文件`find, locate`，查看内存占用

* 你平时使用的git命令，自己做的东西有放在`github`上么

* `MySQL`和`Redis`的区别

* 输入一个网址，浏览器显示页面的全部过程
* 交换机用的什么协议，路由器呢？
* 对云计算的理解，网络协议栈有什么了解过么？
* 反问：部门技术栈

### 字节跳动 -- 算法平台实习开发

* 简历又被推错了，给安排到算法实习面试，面试官说没事，我们先面面看，完了我把你推到开发部门
* 介绍研究生安排
* 项目如何做的
* 机器学习学了哪些东西
* 二分类模型说一下，损失函数
* 刷题刷得多么
* 算法题：斐波那契数列第n项，用`lgn`的复杂度实现
  * 同余定理
  * 矩阵快速幂降低时间复杂度
  * 面试官带着推导了一遍公式，最后磕磕绊绊写出来，也没有调试
* 反问：部门技术栈

### 字节跳动 -- 后台研发实习

```
2021-10-20 21:00 - 22:00
```

终于是推到后台了，之前不是客户端就是算法

* 讲一下C++的左值右值以及左值引用右值引用

* 右值引用解决了什么问题？

* 什么平台开发，调试工具用的什么？

* 有调试过多线程么？复杂`core dump`怎么调试？

* 遇到过踩内存错误么？用过什么动态调试工具？

  `valgrind`只用过它的内存检测

* `const`作用？和`#define`的区别
  声明常量，修饰函数返回值和形参，`const &`为万能引用，可接受左值和右值引用

* 多个线程自增一个id

  互斥访问；原子类型；信号量；信号；面试官让发散性思考

* 共享内存
* MySQL隔离性，如果不能保证会发生什么情况？
* 悲观锁和乐观锁的区别？
* 共享屏幕写代码：
  * 实现一个`vector`，实现为泛型加分，必须实现构造函数，拷贝构造函数，拷贝赋值运算法
  * 删除链表倒数第`k`个元素，需要处理`k`大于链表长度的情况，不允许先遍历一遍链表求出链表长度，让构造极端情况测试例并且`debug`

### 蔚来汽车 -- 自动驾驶C++实习

```
2021-10-22 19:00 - 21:00
```

这个是一二三面连在一起的，总共两个多小时

**一面**：

* 介绍网络通信服务器项目

* 用了线程间的什么通信手段

* 用的`pthread`还是`thread`实现的，有了解过`thread`库么？

* 线程间和进程间的通信方式，项目中是怎么使用的？

* 介绍实习做的高可信分析工具集

* 讲一下印象比较深的规则实现

* 具体阐述一下对象切片

* 讲一下你对虚函数了解

* 虚指针的内存布局

* C++中的三种new，你是怎么实现new内存检测规则的？

* `lldb`调试用的多么，遇到崩溃怎么去调试

* 平时用`STL`哪些容器比较多？

* 讲一下`set`和`map`

  底层实现；特点；应用场景，时间复杂度；怎么选择

* `cpp14`和`cpp17`怎么学的；具体讲一下`cpp14`的新特性；

* 项目中具体是如何使用这些新特性的；`lambda`具体讲一下；

* 讲一下移动语义，什么时候会使用`std::move`？

* 平时用模板么？对模板有什么看法？

* 工具集为什么不选择使用`python`去做？

* 智能指针用的多么？具体引用机制怎么保证自动释放内存的？

* C++内存模型，函数参数和常量存储位置；

* `for-range`循环怎么使用的，相比普通`for`有什么有点，底层是怎么实现的了解么？

* `opencv`用过么？

* 了解C++优化么？

* 知道什么设计模式，共享屏幕写一个单例

  写了普通的双检查锁机制，加了个局部`GC`用来释放单例，面试官怀疑让我跑一遍打印下看能否正确释放单例指针。。

* 了解自动驾驶么？

* 反问

**二面**：

二面的问题有一些和一面重复的

* 又介绍一遍服务器项目，详细讲一下它的工作流程；
* 多线程具体做什么？为什么有了线程池还需要专用线程？
* 说说你对栈的理解，除了线程栈，线程还拥有哪些系统资源，（CPU，线程ID）
* 线程池具体怎么知道要处理具体的业务逻辑
* 线程池的消息队列怎么设计的，线程是怎么访问的？
* 说一下`vector`的底层实现，其它容器，平时怎么选择使用？
* 为什么`set`或者`map`底层使用红黑树，红黑树的特点，相比于其它数据结构的优势？
* `git stash, git rebase`
* 算法题：无序数组，小于零的放左边，大于零的放右边，0放中间
* 反问：部门相关

**三面**：

* 聊家常
